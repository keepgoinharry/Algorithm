#include <bits/stdc++.h>
using namespace std;
using ll = long long;

ll N,B;

void matrixPow(vector<vector<int>> &a,vector<vector<int>> &b)
{
  vector<vector<int>> c(N,vector<int>(N,0));
  for(int i=0; i<N; i++)
    {
      for(int k=0; k<N; k++)
        {
          if(a[i][k] == 0)continue;
          for(int j=0; j<N; j++)
            {
              c[i][j] = (c[i][j] + (a[i][k] * b[k][j]))%1000 ;
              
            }
        }
    }
  a = c;
}
int main() {
  ios::sync_with_stdio(false);
  cin.tie(nullptr);
  cin>>N>>B;
  vector<vector<int>> v(N,vector<int>(N,0));
  for(int i=0; i<N; i++)
    {
      for(int j=0; j<N; j++)
        {
          cin>>v[i][j];
        }
    }

  vector<vector<int>> r(N,vector<int>(N,0));

  for(int i=0; i<N; i++)r[i][i] = 1;
  
  while(B>0)
    {
      if((B&1)==1)matrixPow(r,v);
      matrixPow(v,v);
      B>>=1;
    }


  for(int i=0; i<N; i++)
    {
      for(int j=0; j<N; j++)
        {
          cout<<r[i][j]<< " ";
        }
      cout<<"\n";
    }
}
